<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Express Capital Network Associates - Application</title>
<style>
    /* ========================================================
    CORE STYLES
    ========================================================
    */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f0f4f0;
        color: #04420f;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
    }

    .form-wrapper {
        width: 100%;
        max-width: 900px;
        margin: 20px;
        background-color: #fff;
        border: 4px solid #14591c;
        padding: 30px;
        box-sizing: border-box;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .header-banner {
        background-color: #14591c;
        padding: 20px;
        color: #fff;
        text-align: center;
        margin: -30px -30px 20px -30px;
        border-bottom: 4px solid #14591c;
        border-radius: 4px 4px 0 0;
    }

    h1, h2 {
        margin: 0;
        font-weight: bold;
    }

    h3 {
        font-size: 22px;
        color: #14591c;
        border-bottom: 2px solid #e6ebea;
        padding-bottom: 5px;
        margin-top: 30px;
        margin-bottom: 15px;
        width: 100%; /* Ensure headers are full width */
    }

    form {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        flex: 1 1 45%;
    }

    .form-group-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        width: 100%;
    }
    
    label {
        font-weight: bold;
        color: #04420f;
        margin-bottom: 5px;
    }

    input[type="text"], input[type="email"], input[type="tel"], input[type="number"], input[type="date"], textarea, select, input[type="file"] {
        padding: 12px;
        font-size: 16px;
        border: 1px solid #14591c;
        border-radius: 4px;
        background-color: #e6ebea;
        color: #04420f;
        box-sizing: border-box;
        font-weight: 600;
        width: 100%;
    }

    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #0f934b;
        box-shadow: 0 0 5px rgba(15, 147, 75, 0.5);
    }
    
    .form-group.full-width {
        flex: 1 1 100%;
    }

    .radio-group {
        display: flex;
        gap: 20px;
        align-items: center;
    }

    /* ========================================================
    CUSTOM FIELD STYLES (for $) and (for https://www.)
    ========================================================
    */
    .website-group, .currency-group {
        display: flex;
        align-items: stretch;
        border: 1px solid #14591c;
        border-radius: 4px;
        background-color: #e6ebea;
        padding: 0;
        width: 100%;
        box-sizing: border-box;
    }

    .website-group span, .currency-group span {
        padding: 12px;
        font-size: 16px;
        color: #04420f;
        font-weight: 600;
        border-right: 1px solid #14591c;
        background-color: #d1d8d1;
        border-radius: 4px 0 0 4px;
        white-space: nowrap;
        display: flex;
        align-items: center;
    }
    
    /* Make input inside custom group take up remaining space and remove its borders/padding */
    .website-group input[type="text"], .currency-group input[type="text"] {
        flex-grow: 1;
        border: none;
        padding: 12px;
        background-color: transparent;
        border-radius: 0 4px 4px 0;
        width: auto;
    }
    .website-group input[type="text"]:focus, .currency-group input[type="text"]:focus {
        box-shadow: none;
    }

    /* ========================================================
    SIGNATURE & DISCLAIMER STYLES
    ========================================================
    */
    .disclaimer-box {
        border: 1px solid #14591c;
        padding: 15px;
        background-color: #f9fdf9;
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 20px;
    }

    .acknowledgement-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
        font-weight: bold;
    }
    
    .animated-banner {
        background-color: rgba(255, 0, 0, 0.1); 
        color: #ff0000;
        border: 2px solid #ff0000;
        padding: 20px 10px;
        text-align: center;
        border-radius: 4px;
        animation: pulse-grow 2s infinite ease-in-out;
        margin-bottom: 20px;
        display: block;
        font-size: 1.5em;
        font-weight: 700;
    }
    @keyframes pulse-grow {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.02); opacity: 0.9; }
        100% { transform: scale(1); opacity: 1; }
    }
    .animated-target {
        font-size: 24px;
        animation: bounce 1s infinite alternate;
        display: inline-block;
        margin-right: 10px;
    }
    @keyframes bounce {
        0% { transform: translateY(0); }
        100% { transform: translateY(5px); }
    }
    
    /* Signature Pad Styles */
    .signature-pad-container {
        border: 2px dashed #14591c;
        border-radius: 4px;
        background-color: #fff;
        padding: 10px;
        flex: 1 1 100%;
        margin-bottom: 10px;
        box-sizing: border-box;
    }
    #signatureCanvas {
        border: 1px solid #ccc;
        background-color: #f9f9f9;
        touch-action: none;
        display: block;
        width: 100%;
        height: 150px;
    }
    .signature-buttons {
        margin-top: 10px;
        display: flex;
        gap: 10px;
    }
    .signature-buttons button {
        padding: 8px 15px;
        font-size: 14px;
        background-color: #0f934b;
    }
    .signature-buttons button:hover {
        background-color: #04420f;
    }
    
    .buttons {
        display: flex;
        gap: 15px;
        margin-top: 25px;
        width: 100%;
    }

    .buttons button {
        padding: 12px 25px;
        font-size: 16px;
        font-weight: bold;
        background-color: #14591c;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .buttons button:hover {
        background-color: #0f934b;
    }
    
    @media (max-width: 768px) {
        .form-group {
            flex: 1 1 100%;
        }
        
        .buttons {
            flex-direction: column;
        }
    }
</style>
</head>
<body>
<div class="form-wrapper">
    <div class="header-banner">
        <h1>EXPRESS CAPITAL NETWORK ASSOCIATES</h1>
        <h2>Soaring Above the Competition</h2>
    </div>

    <form id="fundingForm" action="https://formspree.io/f/meolqqpr" method="POST" enctype="multipart/form-data">
        <h3>BUSINESS INFORMATION</h3>
        
        <div class="form-group-row">
            <div class="form-group">
                <label for="legalName">Legal Corporate Name:</label>
                <input type="text" id="legalName" name="legalCorporateName" required>
            </div>
            <div class="form-group">
                <label for="dba">DBA (Doing Business As):</label>
                <input type="text" id="dba" name="dba">
            </div>
        </div>
        
        <div class="form-group full-width">
            <label for="address">Physical Address:</label>
            <input type="text" id="address" name="physicalAddress" required>
        </div>
        <div class="form-group">
            <label for="city">City:</label>
            <input type="text" id="city" name="city" required>
        </div>
        <div class="form-group">
            <label for="state">State:</label>
            <select id="state" name="state" required>
                <option value="">Select State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
            </select>
        </div>
        <div class="form-group">
            <label for="zip">Zip:</label>
            <input type="text" id="zip" name="zip" required>
        </div>
        <div class="form-group">
            <label for="businessPhone">Telephone Number:</label>
            <input type="tel" id="businessPhone" name="businessPhone" required>
        </div>
        <div class="form-group">
            <label for="federalTaxID">Federal Tax ID:</label>
            <input type="text" id="federalTaxID" name="federalTaxID" required>
        </div>
        <div class="form-group">
            <label for="businessStarted">Date Business Started:</label>
            <input type="date" id="businessStarted" name="dateBusinessStarted" required>
        </div>

        <div class="form-group full-width">
            <label>Do you have a website?</label>
            <div class="radio-group" id="hasWebsiteRadioGroup">
                <label><input type="radio" name="hasWebsite" value="Yes" id="hasWebsiteYes"> Yes</label>
                <label><input type="radio" name="hasWebsite" value="No" id="hasWebsiteNo" checked> No</label>
            </div>
        </div>

        <div class="form-group full-width" id="websiteUrlGroup" style="display: none;">
            <label for="websiteURL">Website URL:</label>
            <div class="website-group">
                <span>https://www.</span>
                <input type="text" id="websiteURL" name="websiteURL" placeholder="yourcompany.com" value="">
            </div>
        </div>
        <div class="form-group">
            <label for="businessEmail">Email Address:</label>
            <input type="email" id="businessEmail" name="businessEmail" required>
        </div>
        <div class="form-group">
            <label>Type of Entity:</label>
            <div class="radio-group">
                <label><input type="radio" name="entityType" value="Corporation"> Corporation</label>
                <label><input type="radio" name="entityType" value="LLC"> LLC</label>
                <label><input type="radio" name="entityType" value="Partnership"> Partnership</label>
                <label><input type="radio" name="entityType" value="Sole Proprietor"> Sole Proprietor</label>
            </div>
        </div>
        <div class="form-group">
            <label for="industryType">Industry Type:</label>
            <select id="industryType" name="industryType" required>
                <option value="">Select a business type</option>
                <option value="Retail Store">Retail Store</option>
                <option value="Restaurant / Food Service">Restaurant / Food Service</option>
                <option value="E-commerce / Online Store">E-commerce / Online Store</option>
                <option value="Construction / Trades">Construction / Trades (Plumbing, Electrical, HVAC)</option>
                <option value="Healthcare / Medical Practice">Healthcare / Medical Practice</option>
                <option value="Professional Services">Professional Services (Consulting, Legal, Accounting)</option>
                <option value="Automotive">Automotive (Repair, Dealership)</option>
                <option value="Hospitality / Lodging">Hospitality / Lodging (Hotels, Motels, B&Bs)</option>
                <option value="Manufacturing / Production">Manufacturing / Production</option>
                <option value="Transportation / Logistics">Transportation / Logistics</option>
                <option value="Beauty Salon / Spa">Beauty Salon / Spa</option>
                <option value="Fitness / Gym">Fitness / Gym</option>
                <option value="Real Estate / Property Management">Real Estate / Property Management</option>
                <option value="Technology / Software">Technology / Software</option>
                <option value="Agriculture">Agriculture</option>
                <option value="Non-Profit Organization">Non-Profit Organization</option>
                <option value="Other">Other (Please specify)</option>
            </select>
        </div>
        <div class="form-group">
            <label for="monthlyGrossIncome">Monthly Gross Income (Avg.):</label>
            <div class="currency-group">
                <span>$</span>
                <input type="text" id="monthlyGrossIncome" name="monthlyGrossIncome" placeholder="e.g., 50,000" required>
            </div>
        </div>
        <div class="form-group">
            <label for="fundingAmount">Funding Amount Request:</label>
            <div class="currency-group">
                <span>$</span>
                <input type="text" id="fundingAmount" name="fundingAmountRequest" placeholder="e.g., 25,000" required>
            </div>
        </div>
        <div class="form-group full-width">
            <label for="fundingReason">Primary reason for seeking funding:</label>
            <select id="fundingReason" name="fundingReason" required>
                <option value="">Select a reason</option>
                <option value="General Working Capital">General Working Capital / Cash Flow</option>
                <option value="Inventory Purchase">Inventory Purchase</option>
                <option value="Equipment Purchase">Equipment Purchase or Repair</option>
                <option value="Marketing & Advertising">Marketing & Advertising Campaigns</option>
                <option value="Business Expansion">Business Expansion / Renovation</option>
                <option value="Payroll Expenses">Payroll Expenses</option>
                <option value="Debt Consolidation">Debt Consolidation</option>
                <option value="Bridge Financing">Bridge Financing (e.g., waiting on invoices)</option>
                <option value="Emergency Funds">Emergency Funds / Unexpected Expenses</option>
                <option value="Seasonal Business Needs">Seasonal Business Needs</option>
                <option value="New Product/Service">New Product/Service Development</option>
                <option value="Hiring New Staff">Hiring New Staff</option>
                <option value="Real Estate Acquisition">Real Estate Acquisition</option>
                <option value="Franchise Fee / Acquisition">Franchise Fee / Acquisition</option>
                <option value="Other">Other (Please specify)</option>
            </select>
        </div>
        
        <h3>MERCHANT/OWNER INFORMATION</h3>
        <div class="form-group">
            <label for="ownerName">Corporate Officer/Owner Name:</label>
            <input type="text" id="ownerName" name="ownerName" required>
        </div>
        <div class="form-group">
            <label for="ownerTitle">Title:</label>
            <input type="text" id="ownerTitle" name="ownerTitle" required>
        </div>
        <div class="form-group">
            <label for="ownerPercentage">Ownership Percentage:</label>
            <input type="number" id="ownerPercentage" name="ownershipPercentage" min="0" max="100" required>
        </div>
        <div class="form-group">
            <label for="ownerAddress">Home Address:</label>
            <input type="text" id="ownerAddress" name="ownerHomeAddress" required>
        </div>
        <div class="form-group">
            <label for="ownerCity">City:</label>
            <input type="text" id="ownerCity" name="ownerCity" required>
        </div>
        <div class="form-group">
            <label for="ownerState">State:</label>
            <select id="ownerState" name="ownerState" required>
                <option value="">Select State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
            </select>
        </div>
        <div class="form-group">
            <label for="ownerZip">Zip:</label>
            <input type="text" id="ownerZip" name="ownerZip" required>
        </div>
        <div class="form-group">
            <label for="ownerSSN">Social Security Number (SSN):</label>
            <input type="text" id="ownerSSN" name="ownerSSN" pattern="\d{3}-\d{2}-\d{4}" placeholder="XXX-XX-XXXX" required>
        </div>
        <div class="form-group">
            <label for="ownerDOB">Date of Birth:</label>
            <input type="date" id="ownerDOB" name="ownerDOB" required>
        </div>
        <div class="form-group">
            <label for="ownerFICO">FICO Score (Manually Entered):</label>
            <input type="text" id="ownerFICO" name="ownerFICO" placeholder="e.g., 750" required>
        </div>
        <div class="form-group">
            <label for="ownerCell">Cell Number:</label>
            <input type="tel" id="ownerCell" name="ownerCell" required>
        </div>

        <div id="partnerInfoSection" style="display: none; width: 100%; display: flex; flex-wrap: wrap; gap: 20px;">
            <h3 style="width: 100%;">PARTNER INFORMATION</h3>
            <p style="width: 100%;">Please provide information for all owners with 20% or more ownership.</p>
            <div class="form-group">
                <label for="partnerName">Partner Name:</label>
                <input type="text" id="partnerName" name="partnerName">
            </div>
            <div class="form-group">
                <label for="partnerTitle">Title:</label>
                <input type="text" id="partnerTitle" name="partnerTitle">
            </div>
            <div class="form-group">
                <label for="partnerPercentage">Ownership Percentage:</label>
                <input type="number" id="partnerPercentage" name="partnerOwnershipPercentage" min="0" max="100">
            </div>
            <div class="form-group">
                <label for="partnerAddress">Home Address:</label>
                <input type="text" id="partnerAddress" name="partnerHomeAddress">
            </div>
            <div class="form-group">
                <label for="partnerCity">City:</label>
                <input type="text" id="partnerCity" name="partnerCity">
            </div>
            <div class="form-group">
                <label for="partnerState">State:</label>
                <select id="partnerState" name="partnerState">
                    <option value="">Select State</option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
            </div>
            <div class="form-group">
                <label for="partnerZip">Zip:</label>
                <input type="text" id="partnerZip" name="partnerZip">
            </div>
            <div class="form-group">
                <label for="partnerSSN">Social Security Number (SSN):</label>
                <input type="text" id="partnerSSN" name="partnerSSN" pattern="\d{3}-\d{2}-\d{4}" placeholder="XXX-XX-XXXX">
            </div>
            <div class="form-group">
                <label for="partnerDOB">Date of Birth:</label>
                <input type="date" id="partnerDOB" name="partnerDOB">
            </div>
            <div class="form-group">
                <label for="partnerFICO">FICO Score:</label>
                <input type="text" id="partnerFICO" name="partnerFICO" placeholder="e.g., 750">
            </div>
            <div class="form-group">
                <label for="partnerCell">Cell Number:</label>
                <input type="tel" id="partnerCell" name="partnerCell">
            </div>
        </div>

        <h3 style="width: 100%;">DOCUMENT UPLOADS</h3>
        <p style="width: 100%;">Please attach the following required documents (you can upload **multiple documents** at once for each item).</p>
        
        <div class="form-group full-width">
            <label for="driversLicense">1. Copy of Driver's License:</label>
            <input type="file" id="driversLicense" name="driversLicense" accept="image/*,.pdf" multiple required>
        </div>
        
        <div class="form-group full-width">
            <label for="voidedCheck">2. Copy of Voided Check:</label>
            <input type="file" id="voidedCheck" name="voidedCheck" accept="image/*,.pdf" multiple required>
        </div>

        <div class="form-group full-width">
            <label for="bankStatements">3. 4 Most Recent Bank Statements:</label>
            <input type="file" id="bankStatements" name="bankStatements" accept="image/*,.pdf" multiple required>
        </div>
        <div id="signatureAndSubmitSection" style="display: none; width: 100%; display: flex; flex-wrap: wrap; gap: 20px;">
            <div class="full-width">
                <div class="animated-banner">
                    <span class="animated-target">✅</span>
                    <span>Documents uploaded! Please sign below to submit your application.</span>
                </div>
            </div>
        
            <h3>AGREEMENT & SIGNATURE</h3>
            <div class="disclaimer-box full-width">
                By signing above, each of the above listed business and business owner/officer (individually and collectively, “you”) authorize Express Capital Network Associates and its agents, banks or financial institutions to obtain an investigative or consumer report from a credit bureau or a credit agency and to investigate the references given on any other statements or data obtained from applicant. You also authorize Express Capital Network Associates to transmit this application form, with any of the foregoing information obtained in connection with this application, to any or all of the Recipients for the foregoing purposes. You also consent to the release, by any creditor or financial institution, of any information relating to any of you, to Express Capital Network Associates and to each of the Recipients, on its own behalf. I am providing my business cell-phone and business e-mail address and hereby consent to the receipt of correspondence/messages regarding transactions with Express Capital Network Associates and/or its affiliates on either medium. I certify that all the information contained herein is complete, true and accurate.
            </div>

            <div class="acknowledgement-group full-width">
                <input type="checkbox" id="acknowledgement" name="acknowledgement" required>
                <label for="acknowledgement">I acknowledge that I have read and understood the agreement.</label>
            </div>

            <div class="form-group full-width signature-pad-container">
                <label for="signatureCanvas"><span class="animated-target">✍️</span> Owner/Merchant Signature:</label>
                <canvas id="signatureCanvas" width="800" height="150"></canvas>
                <div class="signature-buttons">
                    <button type="button" id="clearSignatureButton">Clear Signature</button>
                </div>
                <input type="file" id="signatureAttachment" name="_attachments" style="display: none;">
            </div>
            <div class="buttons full-width">
                <button type="submit" id="submitButton">Submit Application</button>
                <button type="button" id="printFormButton">Print Application</button>
            </div>
        </div>
        </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DOM Elements ---
        const form = document.getElementById('fundingForm');
        const ownerPercentageInput = document.getElementById('ownerPercentage');
        const partnerInfoSection = document.getElementById('partnerInfoSection');
        const websiteUrlGroup = document.getElementById('websiteUrlGroup');
        const websiteUrlInput = document.getElementById('websiteURL');
        const hasWebsiteRadioGroup = document.getElementById('hasWebsiteRadioGroup');
        const signatureAndSubmitSection = document.getElementById('signatureAndSubmitSection');
        
        // Document Upload Inputs
        const fileInputs = [
            document.getElementById('driversLicense'),
            document.getElementById('voidedCheck'),
            document.getElementById('bankStatements')
        ];

        // --- Core Formatting Logic ---
        
        /**
         * Cleans phone input to digits and formats it as (XXX) XXX-XXXX on blur.
         * Accepts input fields up to 10 digits long.
         */
        const applyPhoneFormatting = (input) => {
            let value = input.value.replace(/\D/g, ''); // Remove all non-digits
            
            if (value.length === 10) {
                // Apply (XXX) XXX-XXXX format
                const part1 = value.substring(0, 3);
                const part2 = value.substring(3, 6);
                const part3 = value.substring(6, 10);
                input.value = `(${part1}) ${part2}-${part3}`;
            } else if (value.length > 0) {
                // For anything less than 10 digits, we leave it as plain digits
                input.value = value;
            } else {
                input.value = '';
            }
        };
        
        /**
         * Cleans SSN input to digits and formats it as XXX-XX-XXXX on blur.
         * Accepts input fields up to 9 digits long.
         */
        const applySSNFormatting = (input) => {
            let value = input.value.replace(/\D/g, ''); // Remove all non-digits
            
            if (value.length === 9) {
                // Apply XXX-XX-XXXX format
                const part1 = value.substring(0, 3);
                const part2 = value.substring(3, 5);
                const part3 = value.substring(5, 9);
                input.value = `${part1}-${part2}-${part3}`;
            } else if (value.length > 0) {
                 // For anything less than 9 digits, we leave it as plain digits
                input.value = value;
            } else {
                input.value = '';
            }
        };
        
        // --- Input Cleaning and Formatting Event Listeners ---
        
        // Target fields: businessPhone, ownerCell, partnerCell
        const phoneInputs = [
            document.getElementById('businessPhone'), 
            document.getElementById('ownerCell'),
            document.getElementById('partnerCell')
        ].filter(input => input); 

        phoneInputs.forEach(input => {
            // On input: automatically strip all non-digits and limit to 10 characters
            input.addEventListener('input', (e) => { 
                e.target.value = e.target.value.replace(/\D/g, '').substring(0, 10); 
            });
            // On blur: apply the final (XXX) XXX-XXXX format
            input.addEventListener('blur', () => applyPhoneFormatting(input));
        });

        // Target fields: ownerSSN, partnerSSN
        const ssnInputs = [
            document.getElementById('ownerSSN'), 
            document.getElementById('partnerSSN')
        ].filter(input => input); 

        ssnInputs.forEach(input => {
            // On input: automatically strip all non-digits and limit to 9 characters
            input.addEventListener('input', (e) => { 
                e.target.value = e.target.value.replace(/\D/g, '').substring(0, 9); 
            });
            // On blur: apply the final XXX-XX-XXXX format
            input.addEventListener('blur', () => applySSNFormatting(input));
        });


        // --- Signature Pad Logic ---
        const canvas = document.getElementById('signatureCanvas');
        const ctx = canvas.getContext('2d');
        const clearButton = document.getElementById('clearSignatureButton');
        const signatureAttachmentInput = document.getElementById('signatureAttachment');
        let isDrawing = false;
        let signatureDrawn = false; 

        const setupCanvas = () => {
            const rect = canvas.getBoundingClientRect();
            const scale = window.devicePixelRatio; 
            canvas.width = rect.width * scale;
            canvas.height = rect.height * scale;
            ctx.scale(scale, scale);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            ctx.fillStyle = '#f9f9f9'; 
            ctx.fillRect(0, 0, canvas.width / scale, canvas.height / scale); 
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.strokeStyle = '#04420f';
        };
        
        setupCanvas();
        window.addEventListener('resize', setupCanvas);

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            let clientX, clientY;
            if (e.touches) {
                const touch = e.touches[0] || e.changedTouches[0]; 
                clientX = touch.clientX;
                clientY = touch.clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }
            // Account for any potential scrolling, though less common in fixed form layouts
            return {
                x: clientX - rect.left,
                y: clientY - rect.top
            };
        }

        function startDrawing(e) {
            const pos = getPos(e);
            isDrawing = true;
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
            signatureDrawn = true;
        }

        function draw(e) {
            if (!isDrawing) return;
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function stopDrawing() {
            isDrawing = false;
        }

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startDrawing(e);
        }, { passive: false });
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            draw(e);
        }, { passive: false });
        canvas.addEventListener('touchend', stopDrawing);
        clearButton.addEventListener('click', () => {
            setupCanvas(); 
            signatureDrawn = false;
        });
        // --- End Signature Pad Logic ---


        // --- CONDITIONAL VISIBILITY LOGIC ---

        // 1. Partner Visibility Logic (based on Owner Percentage)
        const checkPartnerVisibility = () => {
            const percentage = parseInt(ownerPercentageInput.value);
            if (!isNaN(percentage) && percentage < 100) {
                partnerInfoSection.style.display = 'flex';
                // Note: We don't require the partner fields unless they enter data
            } else {
                partnerInfoSection.style.display = 'none';
                // Clear partner inputs when hidden
                partnerInfoSection.querySelectorAll('input, select').forEach(field => {
                    if (field.type !== 'submit' && field.type !== 'button') {
                        field.value = '';
                    } else if (field.tagName === 'SELECT') {
                        field.selectedIndex = 0;
                    }
                });
            }
        };
        ownerPercentageInput.addEventListener('input', checkPartnerVisibility);
        checkPartnerVisibility();


        // 2. Website URL Conditional Logic
        const checkWebsiteVisibility = () => {
            const selectedValue = form.querySelector('input[name="hasWebsite"]:checked')?.value;
            if (selectedValue === 'Yes') {
                websiteUrlGroup.style.display = 'flex';
                websiteUrlInput.required = true;
            } else {
                websiteUrlGroup.style.display = 'none';
                websiteUrlInput.required = false;
                websiteUrlInput.value = ''; // Clear value if hidden
            }
        };
        hasWebsiteRadioGroup.addEventListener('change', checkWebsiteVisibility);
        checkWebsiteVisibility();
        
        
        // 3. Signature and Submission Conditional Logic (Appears after file upload)
        const checkSignatureVisibility = () => {
            // Check if ANY of the file inputs have selected files
            const anyFileSelected = fileInputs.some(input => input.files.length > 0);
            
            if (anyFileSelected) {
                // Set display to 'flex' as its container is using flex layout
                signatureAndSubmitSection.style.display = 'flex';
                // Make the acknowledgement checkbox required
                document.getElementById('acknowledgement').required = true;
            } else {
                signatureAndSubmitSection.style.display = 'none';
                document.getElementById('acknowledgement').required = false;
            }
        };

        // Attach event listeners to all file inputs
        fileInputs.forEach(input => {
            input.addEventListener('change', checkSignatureVisibility);
        });
        checkSignatureVisibility(); // Check on load
        

        // --- Core Form Submission Logic (captures all form data + signature file) ---
        form.addEventListener('submit', function(e) {
            
            // Client-side validation for signature
            if (signatureAndSubmitSection.style.display !== 'none' && !signatureDrawn) {
                alert("Please provide a digital signature before submitting.");
                e.preventDefault();
                return;
            }

            e.preventDefault();
            
            // 1. Convert the drawing from the canvas to a JPEG Blob
            canvas.toBlob(function(blob) {
                
                // 2. Create a virtual File object for Formspree
                const signatureFile = new File([blob], "Owner_Signature.jpeg", {
                    type: "image/jpeg",
                    lastModified: Date.now()
                });

                // 3. Create a DataTransfer object and assign the signature file
                const dataTransfer = new DataTransfer();
                // Add the signature file to the virtual file list for the hidden attachment input
                dataTransfer.items.add(signatureFile);
                signatureAttachmentInput.files = dataTransfer.files;

                // 4. Create a new FormData object to submit all form fields 
                const formData = new FormData(form);
                
                // Final cleanup: Remove partner data if section was hidden
                if (partnerInfoSection.style.display === 'none') {
                    partnerInfoSection.querySelectorAll('input, select').forEach(field => {
                        formData.delete(field.name);
                    });
                }
                
                // 5. Submit using Fetch API
                // You must ensure this endpoint (https://formspree.io/f/meolqqpr) is verified and configured for file uploads.
                fetch(form.action, {
                    method: form.method,
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        alert("Application submitted successfully! You will receive a copy of your application shortly.");
                        form.reset();
                        setupCanvas(); 
                        signatureDrawn = false;
                        // Reset conditional visibility on success
                        checkPartnerVisibility();
                        checkWebsiteVisibility();
                        checkSignatureVisibility();
                    } else {
                        // Handle Formspree validation/error messages
                        response.json().then(data => {
                            if (Object.hasOwn(data, 'errors')) {
                                alert("Submission Error: " + data.errors.map(error => error.message).join(", "));
                            } else {
                                alert("An error occurred during submission. Please ensure your endpoint is verified in Formspree.");
                            }
                        })
                    }
                })
                .catch(error => {
                    alert("A network error occurred. Please try again.");
                });

            }, 'image/jpeg', 0.95); // Convert canvas to JPEG blob with 95% quality
        });

        // --- Print Button Logic ---
        const printButton = document.getElementById('printFormButton');
        printButton.addEventListener('click', function(e) {
            e.preventDefault();
            window.print();
        });
    });
</script>
</body>
</html>